{"ast":null,"code":"var _jsxFileName = \"D:\\\\College Work\\\\Hackathon\\\\SBusTrack\\\\src\\\\App.js\";\nimport React from 'react';\nimport './App.css';\nimport firebase from \"./Firebase\";\nimport a from \"./img.png\";\nimport GoogleMapReact from 'google-map-react';\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      center: {\n        lat: 27.714750,\n        lng: 85.309285\n      },\n      buses: [],\n      mybusid: \"\",\n      zoom: 15,\n      status: true,\n      bus: {}\n    };\n\n    this.requestBus = () => {\n      fetch('http://localhost:4000/request_bus?pid=' + 1).then(response => response.json()).then(response => this.setState({\n        mybusid: response.data[0].bid\n      })) // .then(response => console.log(response.data[0].bid))\n      .catch(err => console.error(err.toString()));\n    };\n\n    this.showPosition = position => {\n      console.log(position);\n      this.setState({\n        center: {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        },\n        status: true\n      }); // console.log(this.state.center)\n    };\n  }\n\n  componentDidMount() {\n    console.log(navigator.geolocation.watchPosition(this.showPosition));\n    const busRef = firebase.database().ref('online_drivers');\n    busRef.on('value', snapshot => {\n      console.log(\"From bus\");\n      let buses = snapshot.val();\n      let newState = [];\n\n      for (let bus in buses) {\n        // console.log(buses[bus])\n        newState.push({\n          center: {\n            lat: buses[bus].lat,\n            lng: buses[bus].lng,\n            text: \"\" + bus\n          }\n        });\n      } // console.log(\"NEW STATE\")\n      // console.log(newState);\n\n\n      this.setState({\n        buses: newState\n      });\n    });\n    this.requestBus();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      style: {\n        height: '100vh',\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, this.state.status ? React.createElement(GoogleMapReact, {\n      bootstrapURLKeys: {\n        key: \"AIzaSyBLFv4JVBlC3pXdvO7TBUBVWgrEq4bb_y0\"\n      },\n      defaultCenter: this.state.center,\n      defaultZoom: this.state.zoom,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(AnyReactComponentMe, {\n      lat: this.state.center.lat,\n      lng: this.state.center.lng,\n      text: \"me\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), console.log(this.state.buses), this.state.buses.map(center => React.createElement(AnyReactComponent, {\n      lat: center.center.lat,\n      lng: center.center.lng,\n      text: center.center.text,\n      mybus: this.state.mybusid,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }))) : \"\");\n  }\n\n}\n\nconst AnyReactComponent = ({\n  text,\n  mybus\n}) => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 94\n  },\n  __self: this\n}, text === mybus ? React.createElement(\"img\", {\n  src: a,\n  height: \"30px\",\n  width: \"30px\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 94\n  },\n  __self: this\n}) : React.createElement(\"img\", {\n  src: a,\n  height: \"20px\",\n  width: \"20px\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 94\n  },\n  __self: this\n}));\n\nconst AnyReactComponentMe = ({\n  text\n}) => React.createElement(\"img\", {\n  src: a,\n  height: \"40px\",\n  width: \"40px\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 95\n  },\n  __self: this\n});\n\nexport default App;","map":{"version":3,"sources":["D:/College Work/Hackathon/SBusTrack/src/App.js"],"names":["React","firebase","a","GoogleMapReact","App","Component","state","center","lat","lng","buses","mybusid","zoom","status","bus","requestBus","fetch","then","response","json","setState","data","bid","catch","err","console","error","toString","showPosition","position","log","coords","latitude","longitude","componentDidMount","navigator","geolocation","watchPosition","busRef","database","ref","on","snapshot","val","newState","push","text","render","height","width","key","map","AnyReactComponent","mybus","AnyReactComponentMe"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport firebase from \"./Firebase\";\nimport a from \"./img.png\";\nimport GoogleMapReact from 'google-map-react';\nclass App extends React.Component{\n  state = {\n    center: {\n      lat: 27.714750,\n      lng: 85.309285\n    },\n    buses:[],\n    mybusid:\"\",\n    zoom: 15,\n    status: true,\n    bus:{}\n  };\n\n  componentDidMount(){\n    console.log(navigator.geolocation.watchPosition(this.showPosition))\n    const busRef = firebase.database().ref('online_drivers');\n    busRef.on('value', (snapshot)=>{\n      console.log(\"From bus\")\n      let buses = snapshot.val();\n      let newState = [];\n      for(let bus in buses){\n        // console.log(buses[bus])\n        newState.push({center:{lat:buses[bus].lat, lng:buses[bus].lng, text:\"\"+bus}})\n      }\n      // console.log(\"NEW STATE\")\n      // console.log(newState);\n      this.setState({\n        buses:newState\n      })\n    })\n    this.requestBus()\n  }\n\n  requestBus = () => {\n    fetch('http://localhost:4000/request_bus?pid=' + 1)\n        .then(response => response.json())\n        .then(response => this.setState({mybusid: response.data[0].bid}))\n        // .then(response => console.log(response.data[0].bid))\n        .catch(err => console.error(err.toString()))\n  }\n\n\n  showPosition = (position) => {\n    console.log(position)\n    this.setState({\n      center:{\n        lat: position.coords.latitude,\n        lng: position.coords.longitude\n      },\n      status : true\n\n    })\n\n    // console.log(this.state.center)\n  }\n\n  render(){\n  return (\n    <div style={{ height: '100vh', width: '100%' }}>\n      {this.state.status?\n    <GoogleMapReact\n      bootstrapURLKeys={{ key: \"AIzaSyBLFv4JVBlC3pXdvO7TBUBVWgrEq4bb_y0\" }}\n      defaultCenter={this.state.center}\n      defaultZoom={this.state.zoom}\n    >\n      <AnyReactComponentMe\n          lat={this.state.center.lat}\n          lng={this.state.center.lng}\n          text=\"me\"\n      />\n      {console.log(this.state.buses)}\n      {this.state.buses.map((center)=>(\n          <AnyReactComponent\n            lat={center.center.lat}\n            lng={center.center.lng}\n            text={center.center.text}\n            mybus={this.state.mybusid}\n        />\n      ))}\n\n    </GoogleMapReact>\n    : \"\"}\n  </div>\n  );\n  }\n}\n\n\nconst AnyReactComponent = ({ text, mybus }) => <div>{text===mybus? <img src={a} height={\"30px\"} width={\"30px\"}/>: <img src={a} height={\"20px\"} width={\"20px\"}/>}</div>;\nconst AnyReactComponentMe = ({ text }) => <img src={a} height={\"40px\"} width={\"40px\"}/>;\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}